## practice画面 最低限UI仕様（MVP）

### 1. 画面目的

- 出題（テンパイ状態）→ 数巡演出 → ロン/ツモ発生 → 点数回答 → 結果画面へ遷移
- 実戦に近い認知導線（雀魂ライクな情報配置）で、点数計算を即答できるようにする

---

### 2. 前提

- 画面向き：横持ち（ランドスケープ）前提
- 表示対象：自分の手牌のみ（テンパイ時点で開示）
- 相手手牌は表示しない
- 数巡演出はスキップ可能
- 回答方式：設定により「テキスト入力」または「選択肢式（6択）」に切替

---

### 3. 画面レイアウト（領域分割）

横画面を以下の2領域に分割する（比率は目安）。

- **A. 卓情報エリア（左〜中央：60%）**
- **B. 回答エリア（右：40%）**

> 目的：卓UIを縮小しすぎず、自分の手牌とドラ・親マーク等の認知を優先する
> 
> 
> 右側に回答UIをまとめ、回答時は卓UI全体表示に固執しない（手牌は常時見える）
> 

---

### 4. A. 卓情報エリア（左〜中央）

### 4.1 必須表示要素

- **局情報バー（上部）**
    - 場風（例：東）
    - 局数（例：2局）
    - 本場・供託（表示のみ。MVPでは計算に含めない想定でもOK）
- **親マーク**
    - 「自分が親か」を文字ではなくマークで識別できること
- **ドラ表示牌**
    - ドラ表示牌（1枚以上）
    - リーチ問題の場合のみ、裏ドラ表示は result 画面で出す想定でも可（MVPでは表示してもしなくてもOK）
- **点数表示（4人分）**
    - 自分／右／対面／左（数値だけでOK）
    - 位置は雀魂ライク（上下左右の対応が直感的であること）

### 4.2 河（捨て牌）

- MVPでは「簡易表示」で可
    - 4人分の河領域枠＋捨て牌が巡目で増える演出
    - 牌画像でなく小さなタイルでも可（後で差し替え）
- 数巡演出用に「増えること」だけ担保

### 4.3 自分の手牌（最重要）

- 常時表示（テンパイ時点の手牌）
- 14枚表示を基本（テンパイ時点で計算できることが目的）
- 牌の並び順は問題データに従う（自動ソートはしない）
- リーチの場合はリーチ状態が認知できるラベル/バッジを表示

---

### 5. B. 回答エリア（右）

### 5.1 状態遷移（UIステート）

practice画面は内部的に以下のステートを持つ。

1. **出題（テンパイ提示）**
- 卓情報＋自分の手牌を表示
- 「開始」ボタン（または自動開始でも可）
- 数巡演出の説明が必要なら短文を表示
1. **進行演出（2〜6巡）**
- 河が進行して増える
- 「スキップ」ボタンを常時表示
- 残り巡数の表示は任意（あってもOK）
1. **和了発生（ロン/ツモ）**
- ロン or ツモのバナー表示（大きめ）
- 和了牌（ロン牌/ツモ牌）を分かる形で表示（1枚）
1. **回答入力**
- 回答方式に応じた入力UIを表示
- 「回答する」ボタン（入力が揃うまで disabled）
- 入力ミスを減らすため、入力欄の単位や形式を明示

---

### 6. 回答UI仕様（必須）

### 6.1 ロンの回答

- **テキスト入力方式**
    - 入力欄：1つ（数値のみ）
    - 例：7700
- **選択肢式**
    - 6択（点数のみ）
    - 例：2600 / 3900 / 5200 / 7700 / 8000 / 12000

### 6.2 ツモの回答（表記ゆれ排除）

- **テキスト入力方式**
    - 入力欄：2つ
        - 親の支払い（親が支払う額）
        - 子の支払い（子が支払う額）
    - 例：親=2000、子=4000（など）
    - 親ツモの場合
        - 2欄とも同額入力、または「親ツモ」専用表示にして片方を自動同期（どちらでも可）
- **選択肢式**
    - 6択（**親+子のペア**が1セット）
    - 例： (2000,4000) / (1300,2600) / (3000,6000) ...

---

### 7. 共通UI（最低限）

- **戻る**：ホームへ戻る（プレイ中は確認ダイアログがあると望ましい）
- **設定への導線**：MVPでは不要（ホームに集約でもOK）
- **アクセシビリティ**
    - 牌/文字が小さすぎない（スマホ横持ちで視認可能）
    - タップ領域は十分に確保（最低44px相当を目標）

---

### 8. エラーハンドリング（最低限）

- 問題データが読み込めない場合：エラーメッセージ＋再読み込みボタン
- 入力不足：入力欄にエラー表示し、回答ボタンを無効化
- タイマー・演出の中断：スキップで必ず進行できること

---

### 9. MVPで省略してよい要素（明確化）

- 立直棒の卓上表示の再現
- 鳴き・副露のリッチな見た目（openMeldsがあっても簡易表示でOK）
- 他家の手牌やツモ番の詳細演出
- 複雑なアニメーション（CSSの簡易演出で十分）

---

### 10. 結果画面への遷移条件

- 入力が揃い「回答する」押下で遷移
- 遷移時に渡す情報（sessionStorage想定）
    - problemId
    - winType（ron/tsumo）
    - ユーザー回答
    - 正誤
    - 経過時間（ms）